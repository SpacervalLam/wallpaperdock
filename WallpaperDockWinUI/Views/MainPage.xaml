<?xml version="1.0" encoding="UTF-8" ?>
<Page
    x:Class="WallpaperDockWinUI.Views.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Loaded="Page_Loaded"
    SizeChanged="Page_SizeChanged">
    <Page.Content>
        <Grid x:Name="MainGrid" Background="Transparent">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>
            <!-- 背景 (透明，以便系统 Mica / Acrylic 生效并显示桌面) -->
            
            <!-- 分类筛选栏 -->
            <Grid x:Name="CategoryBar" Grid.Row="0" MinHeight="40" Padding="16,0,16,0">
                <Grid HorizontalAlignment="Stretch" VerticalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    
                    <!-- 类型筛选 -->
                    <ComboBox x:Name="GroupComboBox" Grid.Column="0" MinWidth="80" Margin="0,0,10,0" HorizontalAlignment="Stretch" />
                    
                    <!-- R18筛选 -->
                    <ComboBox x:Name="R18ComboBox" Grid.Column="1" MinWidth="90" Margin="8,0,0,0" HorizontalAlignment="Stretch" />
                    
                    <!-- 全屏模式下显示的按钮 -->
                    <Button x:Name="OpenWallpaperEngineButton" Grid.Column="2" Margin="12,0,0,0" Width="36" Height="36" Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Viewbox Width="20" Height="20">
                            <Canvas Width="24" Height="24">
                                <!-- 外框 -->
                                <Path Data="M4,4 H20 A2,2 0 0 1 22,6 V18 A2,2 0 0 1 20,20 H4 A2,2 0 0 1 2,18 V6 A2,2 0 0 1 4,4 Z"
                                      Stroke="#111111" StrokeThickness="1.8" Fill="Transparent" StrokeLineJoin="Round" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                <!-- 左上小方块 -->
                                <Rectangle Canvas.Left="6" Canvas.Top="6" Width="2" Height="2" Fill="#111111"/>
                                <!-- 顺时针弧 -->
                                <Path Data="M15,12 A3,3 0 1 0 9,12" Stroke="#111111" StrokeThickness="1.8" Fill="Transparent" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                <!-- 顺时针箭头 -->
                                <Path Data="M9,12 L11,10 L11,13 Z" Fill="#111111"/>
                                <!-- 逆时针弧 -->
                                <Path Data="M9,12 A3,3 0 1 0 15,12" Stroke="#111111" StrokeThickness="1.8" Fill="Transparent" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                <!-- 逆时针箭头 -->
                                <Path Data="M15,12 L13,14 L13,11 Z" Fill="#111111"/>
                            </Canvas>
                        </Viewbox>
                    </Button>
                    <Button x:Name="BatchOperationsButton" Grid.Column="3" Margin="12,0,0,0" Width="36" Height="36" Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Viewbox Width="20" Height="20">
                            <Canvas Width="24" Height="24">
                                <Rectangle Canvas.Left="5" Canvas.Top="5" Width="5" Height="5" RadiusX="1" RadiusY="1"
                                           Stroke="#6B7280" StrokeThickness="1.6" Fill="Transparent"/>
                                <Rectangle Canvas.Left="14" Canvas.Top="5" Width="5" Height="5" RadiusX="1" RadiusY="1"
                                           Stroke="#6B7280" StrokeThickness="1.6" Fill="Transparent"/>
                                <Rectangle Canvas.Left="5" Canvas.Top="14" Width="5" Height="5" RadiusX="1" RadiusY="1"
                                           Stroke="#6B7280" StrokeThickness="1.6" Fill="Transparent"/>
                                <Path Data="M15.5,13.5 L13,16 L11,14" Stroke="#6B7280" StrokeThickness="1.8" StrokeStartLineCap="Round" StrokeEndLineCap="Round" StrokeLineJoin="Round" Fill="Transparent"/>
                            </Canvas>
                        </Viewbox>
                    </Button>
                    <Button x:Name="SchedulePlayButton" Grid.Column="4" Margin="12,0,0,0" Width="36" Height="36" Background="Transparent" BorderThickness="0" Padding="0" HorizontalAlignment="Center" VerticalAlignment="Center">
                        <Viewbox Width="20" Height="20">
                            <Canvas Width="24" Height="24">
                                <Ellipse Canvas.Left="4" Canvas.Top="4" Width="16" Height="16" Stroke="#6B7280" StrokeThickness="1.8" Fill="Transparent"/>
                                <Line X1="12" Y1="8.5" X2="12" Y2="12.5" Stroke="#6B7280" StrokeThickness="1.6" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                <Line X1="12" Y1="12" X2="14.5" Y2="13.5" Stroke="#6B7280" StrokeThickness="1.6" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                <Polygon Points="17.5,11 20.5,12.5 17.5,14" Fill="#6B7280"/>
                            </Canvas>
                        </Viewbox>
                    </Button>
                </Grid>
            </Grid>
            
            <!-- 搜索栏 -->
            <Grid x:Name="SearchBar" Grid.Row="1" Padding="16,8,16,12">
                <Grid>
                    <TextBox x:Name="SearchBox" PlaceholderText="Search..." MinHeight="40" CornerRadius="8" VerticalContentAlignment="Center" HorizontalContentAlignment="Left" BorderThickness="1" Padding="40,8,40,8" />
                    <Viewbox Width="16" Height="16" Margin="14,0,0,0" HorizontalAlignment="Left" VerticalAlignment="Center" IsHitTestVisible="False">
                        <Canvas Width="24" Height="24">
                            <Ellipse Canvas.Left="5" Canvas.Top="5"
                                     Width="12" Height="12"
                                     Stroke="#6B7280" StrokeThickness="2"
                                     StrokeLineJoin="Round" StrokeStartLineCap="Round" StrokeEndLineCap="Round"
                                     Fill="Transparent"/>
                            <Line X1="16.2" Y1="16.2" X2="21" Y2="21"
                                  Stroke="#6B7280" StrokeThickness="2"
                                  StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                        </Canvas>
                    </Viewbox>
                    <Button x:Name="MicrophoneButton" Width="40" Height="40" HorizontalAlignment="Right" VerticalAlignment="Center" Padding="0" Background="Transparent" BorderThickness="0">
                        <Button.Content>
                            <Viewbox Width="16" Height="16">
                                <Canvas Width="24" Height="24">
                                    <Path Data="M12,2 C13.657,2 15,3.343 15,5 L15,11 C15,12.657 13.657,14 12,14 C10.343,14 9,12.657 9,11 L9,5 C9,3.343 10.343,2 12,2 Z"
                                          Stroke="#6B7280" StrokeThickness="2" Fill="Transparent"
                                          StrokeLineJoin="Round" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                    <Path Data="M19,11 L19,12 C19,15.866 15.866,19 12,19 C8.134,19 5,15.866 5,12 L5,11"
                                          Stroke="#6B7280" StrokeThickness="2" Fill="Transparent"
                                          StrokeLineJoin="Round" StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                    <Line X1="12" Y1="18.5" X2="12" Y2="22"
                                          Stroke="#6B7280" StrokeThickness="2"
                                          StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                    <Line X1="9" Y1="22" X2="15" Y2="22"
                                          Stroke="#6B7280" StrokeThickness="2"
                                          StrokeStartLineCap="Round" StrokeEndLineCap="Round"/>
                                </Canvas>
                            </Viewbox>
                        </Button.Content>
                    </Button>
                </Grid>
            </Grid>
            
            <!-- 批量工具栏 (默认隐藏) -->
            <Grid x:Name="BatchToolbarContainer" Grid.Row="2" Visibility="Collapsed" Height="48">
                <!-- 批量工具栏将在这里动态创建 -->
            </Grid>
            
            <!-- 壁纸列表 -->
            <ProgressRing x:Name="LoadingRing" Grid.Row="3" Width="40" Height="40" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Visible" />
            
            <GridView x:Name="WallpaperList" Grid.Row="3" IsItemClickEnabled="True" SelectionMode="None" Visibility="Collapsed" Padding="12" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
                <GridView.ItemsPanel>
                    <ItemsPanelTemplate>
                        <ItemsWrapGrid x:Name="ItemsWrapGrid" Orientation="Horizontal" HorizontalAlignment="Stretch" VerticalAlignment="Top" />
                    </ItemsPanelTemplate>
                </GridView.ItemsPanel>
                <GridView.ItemContainerStyle>
                    <Style TargetType="GridViewItem">
                        <Setter Property="MinHeight" Value="140" />
                        <Setter Property="Padding" Value="0" />
                        <Setter Property="Margin" Value="8" />
                        <Setter Property="HorizontalContentAlignment" Value="Stretch" />
                        <Setter Property="VerticalContentAlignment" Value="Top" />
                        <Setter Property="Transitions">
                            <Setter.Value>
                                <TransitionCollection>
                                    <ReorderThemeTransition />
                                    <ContentThemeTransition />
                                </TransitionCollection>
                            </Setter.Value>
                        </Setter>
                    </Style>
                </GridView.ItemContainerStyle>
            </GridView>
            
            <TextBlock x:Name="EmptyText" Grid.Row="3" Text="No wallpapers found" FontSize="16" FontWeight="Medium" Foreground="DarkGray" HorizontalAlignment="Center" VerticalAlignment="Center" Visibility="Collapsed" />
        </Grid>
    </Page.Content>
</Page>